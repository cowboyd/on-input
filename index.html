<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>reveal.js - The HTML Presentation Framework</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/serif.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <meta name="example/config/environment" content="%7B%22modulePrefix%22%3A%22example%22%2C%22environment%22%3A%22development%22%2C%22baseURL%22%3A%22/%22%2C%22locationType%22%3A%22auto%22%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%7D%2C%22APP%22%3A%7B%22name%22%3A%22example%22%2C%22version%22%3A%220.0.0.f8a252bc%22%7D%2C%22contentSecurityPolicyHeader%22%3A%22Content-Security-Policy-Report-Only%22%2C%22contentSecurityPolicy%22%3A%7B%22default-src%22%3A%22%27none%27%22%2C%22script-src%22%3A%22%27self%27%20%27unsafe-eval%27%22%2C%22font-src%22%3A%22%27self%27%22%2C%22connect-src%22%3A%22%27self%27%22%2C%22img-src%22%3A%22%27self%27%22%2C%22style-src%22%3A%22%27self%27%22%2C%22media-src%22%3A%22%27self%27%22%7D%2C%22exportApplicationGlobal%22%3Atrue%7D" />

    <!-- Printing and PDF exports -->
    <script>
     var link = document.createElement( 'link' );
     link.rel = 'stylesheet';
     link.type = 'text/css';
     link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
     document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section></section>
        <section>
          <h2>"I like JavaScript"</h2>
          @cowboyd
        </section>
        <section>
          <h2>"I do not like JavaScript"</h2>
          -- many many people
        </section>
        <section>
          <h2><q>"The JavaScript Problem"</q></h2>
          -- The Haskell Community
        </section>
        <section>
          <img src="images/the-javascript-problem.png" style="width: 100%">
          <a href="https://wiki.haskell.org/The_JavaScript_Problem">https://wiki.haskell.org/The_JavaScript_Problem</a>
        </section>
        <section>
          <h3>You're not wrong Walter</h3>
          <img src="images/walter-sobchak-shomer-shabbos.jpg" style="width: 90%"/>
          <h2>
            You're just a <em>Hask-hole</em>
          </h2>
          <aside class="notes">
            we'll hear more from him later.
          </aside>
        </section>
        <section>
          <h1>FP</h1>
          <p>The truth is that we've been gradually doing more and more functional-style programming for years.</p>
        </section>
        <section>
          <h2>MVC</h2>
          <p>
            The view is a <em>pure function</em> of the model
          </p>
          <aside class="notes">
            Subject of my talk here last year.
            First gained some real traction with Backbone.
          </aside>
        </section>
        <section>
          <h3>The New MVC</h3>
          <ul style="display: inline-block; float: right; margin-right: 100px; margin-top: 50px">
            <li>One-Way</li>
            <li>Side-Effect Free</li>
            <li>Idempotent</li>
          </ul>
          <span style="display: inline-block; float: right; transform: scale(2,3.2); position: relative; top: 95px; left: -20px">↓</span>

          <svg width="50%" height="550" viewBox="0 0 500 225" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet">
            <g transform="scale(.75,.75)">
              <title>Layer 1</title>
              <g class="active-path">
                <polyline class="graphEdge" id="svg_18" points="397.74151611328125,401.7062072753906 422.5,418.2488708496094 447.25848388671875,434.7915344238281" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_17" points="311.259521484375,273.74151611328125 331.488037109375,312.5 351.7165832519531,351.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_16" points="356.25994873046875,193.2415313720703 336.79949951171875,215.75 317.3390197753906,238.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_14" points="299.64306640625,110.64816284179688 325.7007751464844,125.7142562866211 351.75848388671875,140.7803497314453" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <circle fill="#cccccc" stroke-width="0" cx="385.00001" cy="160" r="33.24153" id="svg_1" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="301.99999" cy="256" r="17.74152" id="svg_3" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="367.49998" cy="381.5" r="30.24152" id="svg_5" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="478.99998" cy="456" r="31.74152" id="svg_6" class="graphNode" stroke="#000000"></circle>
              </g>
              <g>
                <polyline class="graphEdge graphEdge--fade" id="svg_22" points="122.91644287109375,282.74151611328125 89.65998840332031,326.5 56.403541564941406,370.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_21" points="149.36302185058594,282.74151611328125 145.17288208007812,323.5 140.98275756835938,364.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_20" points="177.00497436523438,282.74151611328125 207.52903747558594,335 238.0531005859375,387.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_19" points="217.244140625,132.64306640625 197.04708862304688,167.45077514648438 176.8500213623047,202.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_15" points="417.0819396972656,193.2415313720703 428.6715087890625,205.25 440.2610778808594,217.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
              </g>
              <g>
                <circle fill="#cccccc" stroke-width="0" cx="467.99998" cy="246" r="28.74152" id="svg_4" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#007fff" stroke-width="0" cx="247.5" cy="80.5" r="52.14306" id="svg_2" class="graphNode graphNode--blue" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="153.49999" cy="242.5" r="40.24152" id="svg_7" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="39.49999" cy="392.5" r="22.24152" stroke="#000000" id="svg_8" class="graphNode graphNode--fade"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="136.99999" cy="403" r="38.74152" id="svg_9" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="248.99999" cy="406" r="18.74152" id="svg_10" class="graphNode graphNode--fade" stroke="#000000"></circle>
              </g>
            </g>
          </svg>
          <aside class="notes">
            <ul>
              <li>The React family of frameworks really kicked this into high gear</li>
              <li>Ember and Angular following suit.</li>
              <li>One of our values on the server, is deterministically
            </ul>
            We've got all this great new hotness for rendering, but there's a problem.
          </aside>
        </section>
        <section>
          <h2>Just One-Way?</h2>
          <p>
            In real-world applications data flow is <em>not</em> one-way
          </p>
          <aside class="notes">
            <ul><li>It's at least two way</li><li>maybe more</li></ul>
          </aside>
        </section>
        <section>
          <h3>What's Up?</h3>
          <p>How does data make its way back to the model/server?</p>
          <p style="display: inline-block; float: right; margin-right: 100px; margin-top: 100px; font-size: 250%;">
            ?
          </p>
          <span style="display: inline-block; float: right; transform: scale(2,4) rotate(180deg); position: relative; top: 125px; left: -100px;">↓</span>

          <svg width="50%" height="550" viewBox="0 0 500 225" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet">
            <g transform="scale(.75,.75)">
              <title>Layer 1</title>
              <g class="active-path">
                <polyline class="graphEdge" id="svg_18" points="397.74151611328125,401.7062072753906 422.5,418.2488708496094 447.25848388671875,434.7915344238281" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_17" points="311.259521484375,273.74151611328125 331.488037109375,312.5 351.7165832519531,351.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_16" points="356.25994873046875,193.2415313720703 336.79949951171875,215.75 317.3390197753906,238.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_14" points="299.64306640625,110.64816284179688 325.7007751464844,125.7142562866211 351.75848388671875,140.7803497314453" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <circle fill="#cccccc" stroke-width="0" cx="385.00001" cy="160" r="33.24153" id="svg_1" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="301.99999" cy="256" r="17.74152" id="svg_3" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="367.49998" cy="381.5" r="30.24152" id="svg_5" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="478.99998" cy="456" r="31.74152" id="svg_6" class="graphNode" stroke="#000000"></circle>
              </g>
              <g>
                <polyline class="graphEdge graphEdge--fade" id="svg_22" points="122.91644287109375,282.74151611328125 89.65998840332031,326.5 56.403541564941406,370.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_21" points="149.36302185058594,282.74151611328125 145.17288208007812,323.5 140.98275756835938,364.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_20" points="177.00497436523438,282.74151611328125 207.52903747558594,335 238.0531005859375,387.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_19" points="217.244140625,132.64306640625 197.04708862304688,167.45077514648438 176.8500213623047,202.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_15" points="417.0819396972656,193.2415313720703 428.6715087890625,205.25 440.2610778808594,217.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
              </g>
              <g>
                <circle fill="#cccccc" stroke-width="0" cx="467.99998" cy="246" r="28.74152" id="svg_4" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#007fff" stroke-width="0" cx="247.5" cy="80.5" r="52.14306" id="svg_2" class="graphNode graphNode--blue" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="153.49999" cy="242.5" r="40.24152" id="svg_7" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="39.49999" cy="392.5" r="22.24152" stroke="#000000" id="svg_8" class="graphNode graphNode--fade"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="136.99999" cy="403" r="38.74152" id="svg_9" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="248.99999" cy="406" r="18.74152" id="svg_10" class="graphNode graphNode--fade" stroke="#000000"></circle>
              </g>
            </g>
          </svg>
          <aside class="notes">
            <ul>
              <li>We've seen how to move data from the model, to the view where it's in a good format for the user</li>
              <li>How do we move data back from the user towards our server?</li>
            </ul>
          </aside>
        </section>
        <section>
          <h2>Number One Answer:</h2>
          <h3>callback</h3>
        </section>
        <section>
          <h2>Callbacks</h2>
          <img src="images/eff-you.jpg" style="width: 50%;"/>
          <aside class="notes">
            <ul>
              <li>Callbacks are everything we hate!</li>
              <li>everything we've been spending years of lives to eradicate!</li>
              <li>imperative, side effects, they mess around with shared state</li>
            </ul>
          </aside>
        </section>
        <section>
          <h3>User Experience</h3>
          <p style="display: inline-block; float: right; margin-right: 100px; margin-top: 50px; font-size: 250%;">
            <img data-fragment-index="0" class="fragment" src="images/eff-you.jpg" style="width: 200px">
          </p>
          <span class="fragment" data-fragment-index="0" style="display: inline-block; float: right; transform: scale(2,4) rotate(180deg); position: relative; top: 125px; left: -100px;">↓</span>

          <svg width="50%" height="550" viewBox="0 0 500 225" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet">
            <g transform="scale(.75,.75)">
              <title>Layer 1</title>
              <g class="active-path">
                <polyline class="graphEdge" id="svg_18" points="397.74151611328125,401.7062072753906 422.5,418.2488708496094 447.25848388671875,434.7915344238281" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_17" points="311.259521484375,273.74151611328125 331.488037109375,312.5 351.7165832519531,351.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_16" points="356.25994873046875,193.2415313720703 336.79949951171875,215.75 317.3390197753906,238.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_14" points="299.64306640625,110.64816284179688 325.7007751464844,125.7142562866211 351.75848388671875,140.7803497314453" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <circle fill="#cccccc" stroke-width="0" cx="385.00001" cy="160" r="33.24153" id="svg_1" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="301.99999" cy="256" r="17.74152" id="svg_3" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="367.49998" cy="381.5" r="30.24152" id="svg_5" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="478.99998" cy="456" r="31.74152" id="svg_6" class="graphNode" stroke="#000000"></circle>
              </g>
              <g>
                <polyline class="graphEdge graphEdge--fade" id="svg_22" points="122.91644287109375,282.74151611328125 89.65998840332031,326.5 56.403541564941406,370.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_21" points="149.36302185058594,282.74151611328125 145.17288208007812,323.5 140.98275756835938,364.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_20" points="177.00497436523438,282.74151611328125 207.52903747558594,335 238.0531005859375,387.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_19" points="217.244140625,132.64306640625 197.04708862304688,167.45077514648438 176.8500213623047,202.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_15" points="417.0819396972656,193.2415313720703 428.6715087890625,205.25 440.2610778808594,217.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
              </g>
              <g>
                <circle fill="#cccccc" stroke-width="0" cx="467.99998" cy="246" r="28.74152" id="svg_4" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#007fff" stroke-width="0" cx="247.5" cy="80.5" r="52.14306" id="svg_2" class="graphNode graphNode--blue" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="153.49999" cy="242.5" r="40.24152" id="svg_7" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="39.49999" cy="392.5" r="22.24152" stroke="#000000" id="svg_8" class="graphNode graphNode--fade"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="136.99999" cy="403" r="38.74152" id="svg_9" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="248.99999" cy="406" r="18.74152" id="svg_10" class="graphNode graphNode--fade" stroke="#000000"></circle>
              </g>
            </g>
          </svg>
          <aside class="notes">
            <ul>
              <li>We've seen how to move data from the model, to the view where it's in a good format for the user</li>
              <li>How do we move data back from the user towards our server?</li>
            </ul>
          </aside>
        </section>
        <section>
          <h2>Is there a better way?</h2>
        </section>
        <section data-background="#588cb1">
          <h1>on('input')</h1>
          <p>
            <div>
              <a href="http://frontside.io">http://frontside.io</a>
            </div>
            <a href="http://twitter.com/cowboyd">@cowboyd</a>
          </p>
          <aside class="notes">
            I think there is. I think we can do better than callbacks.
            I think we can use the same techniques we learned from the rendering side of things
          </aside>
        </section>
        <section>
          <h2> Hello. </h2>
          <div data-component="credit-card"></div>
          <p>I believe we've already met.</p>
        </section>
        <section>
          <h2>Simple.</h2>
          <pre><code>
$('form').on('submit', function() {
  $.post('/api/cards', $(this).serializeJSON());
});
          </code></pre>
        </section>
        <section>
          <h2>Requirement:</h2>
          <h3>I don't want to submit the form if it isn't valid</h3>
        </section>
        <section>
          <h2>Easy.</h2>
          <pre><code>
$('form').validator({
  "input[name=card-number]": {
    validations: {
      lunCheck: function(value) {/* isValidLuhn(value)*/ }
    },
    errorMessageSelector: ".card-number-errors"
  } //etc.
}).on('submit', function(e) {
  const validation = $(this).validate(); //validation plugin
  if (validation.passed) {
    $.post('/api/cards', $(this).serializeJSON());
  } else {
    e.preventDefault();
  }
});
          </code></pre>
          <aside class="notes">
            We pull a validation plugin off the shelf, and we only submit if it
            tells us we passed.
            <ul>
              <li>most are a variation on this</li>
              <li>responsible for stuffing things into the dom</li>
            </ul>
          </aside>
        </section>
        <section>
          <h2>Requirement</h2>
          <p>
            I want validation to happen every time a field changes
          </p>
        </section>
        <section>
          <h2>Easy: Part 2</h2>
          <!-- //I want to validate every time anything changes. -->
          <pre><code style="max-height: 500px;">
$('form').validator({
  "input[name=card-number]": {
    validations: {
      lunCheck: function(value) {/* isValidLuhn(value)*/ }
    },
    errorMessageSelector: ".card-name-errors"
  } //etc.
}).on('submit', function(e) {
  const validation = $(this).validate(); //validation plugin
  if (validation.passed) {
    $.post('/api/cards', $(this).serializeJSON());
  } else {
    e.preventDefault();
  }
}).on('change', function() {
  const validation = $(this).validate();
});
          </code></pre>
          <aside class="notes">
            This is pretty easy... Note the duplication
          </aside>
        </section>
        <section>
          <h2>Requirement</h2>
          <p>
            Don't enable the submit button unless the form is actually valid.
          </p>
        </section>
        <section>
          <h2>Easy Part 2.1</h2>
          <pre><code>
$('form').validator({
  "input[name=card-number]": {
    validations: {
      lunCheck: function(value) {/* isValidLuhn(value)*/ }
    },
    errorMessageSelector: ".card-name-errors"
  } //etc.
}).on('submit', function(e) {
  const validation = $(this).validate(); //validation plugin
  if (validation.passed) {
    $.post('/api/cards', $(this).serializeJSON());
  } else {
    e.preventDefault();
  }
}).on('change', function() {
  const validation = $(this).validate();
  $(this).find('input[type=submit]').prop('disabled', !validation.passed);
});
          </code></pre>
        </section>
        <section>
          <h2>Requirement</h2>
          <p>
            Let's verify with the server that this card isn't in our fraud database.
          </p>
        </section>
        <section>
          <h2>Part 3: Revenge of the Sith</h2>
          <!-- // I want there to be an asynchronous lookup on the server to see if this card -->
          <!-- // is in our fraud database. -->
          <pre><code style="font-size: 12px; line-height: 14px;">
let isSafeCardNumber = false;

$('form').validator({
  "input[name=card-number]": {
    validations: {
      lunCheck: function(value) {/* isValidLuhn(value)*/ }
    },
    errorMessageSelector: ".card-name-errors"
  } //etc.
}).on('submit', function(e) {
  const validation = $(this).validate(); //validation plugin
  if (validation.passed && isSafeCardNumber) {
    $.post('/api/cards', $(this).serializeJSON());
  } else {
    e.preventDefault();
  }
}).on('change', function() {
  const validation = $(this).validate();
  $(this).find('input[type=submit]').prop('disabled', !validation.passed);
}).on('change', function(e) {
  const validation = $(this).validate();
  $(this).find('input[type=submit]').prop('disabled', !validation.passed);
  const creditCardNumber = this.elements['card-number'];
  if (e.target === creditCardNumber) {
    $.get(`/api/fraud-detector/cards/${creditCardNumber.value}`).then(()=> {
      isSafeCardNumber = true;
    }).fail(()=> {
      $(this).find('input[type=submit]').prop('disabled', !validation.passed);
      isSafeCardNumber = false;
    });
  }
});
          </code></pre>
          <aside class="notes">
            <ul>
              <li>global state because we don't when things will resolve</li>
              <li>different codepath for different validations</li>
              <li>I had to think realy hard to get this one right</li>
            </ul>
          </aside>
        </section>
        <section>
          <h2>Requirement</h2>
          <p>
            Can we throw up a loading spinner while we're doing the fraud detection?
          </p>
        </section>
        <section>
          <!-- // I want feedback while the card number is validating against the server -->
          <h2>umm...</h2>
          <pre><code style="font-size: 12px; line-height: 14px;">
let isSafeCardNumber = false;

$('form').validator({
  "input[name=card-number]": {
    validations: {
      lunCheck: function(value) {/* isValidLuhn(value)*/ }
    },
    errorMessageSelector: ".card-name-errors"
  } //etc.
}).on('submit', function(e) {
  const validation = $(this).validate(); //validation plugin
  if (validation.passed) {
    $.post('/api/cards', $(this).serializeJSON());
  } else {
    e.preventDefault();
  }
}).on('change', function() {
  const validation = $(this).validate();
  $(this).find('input[type=submit]').prop('disabled', !validation.passed);
}).on('change', function(e) {
  const validation = $(this).validate();
  $(this).find('input[type=submit]').prop('disabled', !validation.passed);
  const creditCardNumber = this.elements['card-number'];
  if (e.target === creditCardNumber) {
    $(this).find('.card-name-check-spinner').toggleClass('visible', true);
    $.get(`/api/fraud-detector/cards/${creditCardNumber.value}`).then(()=> {
      isSafeCardNumber = true;
    }).fail(()=> {
      $(this).find('input[type=submit]').prop('disabled', !validation.passed);
      isSafeCardNumber = false;
    }).always(() => {
      $(this).find('.card-name-check-spinner').toggleClass('visible', false);
    });
  }
});
          </code></pre>
          <aside class="notes">
            <ul>
              <li>tricky set up and teardown</li>
              <li>Can't see the difference between this slide and the last one?</li>
              <li>hopelessly intertwined</li>
            </ul>
          </aside>
        </section>
        <section>
          <h2>I just want to go home!</h2>
          <pre><code>
$('form').on('submit', ()=> {
  $.post('/api/cards', $(this).serializeJSON());
});
          </code></pre>
        </section>
        <section>
          <h3>Remeber this guy?</h3>
          <img src="images/walter-sobchak-homework.jpg" style="width: 80%">
        </section>
        <section>
          <h2>Requirement:</h2>
          <h3>I don't want to submit the form if it isn't valid</h3>
        </section>
        <section>
          <h2>Use MVC</h2>
          A form's values is a <em>pure function</em> of it's inputs
        </section>
        <section>
          <pre><code>
let form = new CardForm({
  number: '4242424242424242'
});

form.type  /* visa */
form.isValid /* true */
form.isInvalid /* false */

          </code></pre>
        </section>
        <section>
          <pre><code>
//form.js
  get type() {
    const number = this.number;
    if (number.match(VISA_REGEX)) {return "visa";}
    else if (number.match(MASTERCARD_REGEX)) {return "mastercard";}
    else if (number.match(AMEX_REGEX)) {return "amex";}
    else if (number.match(DISCOVER_REGEX)) {return "discover";}
    else if (number.match(DINERS_CLUB_REGEX)) {return "diners";}
    else if (number.match(JCB_REGEX)) {return "jcb";}
    else {return undefined;}
  },

  get isValid() {
    const rules = this.rules;
    return rules.reduce(function(currentValue, rule) {
      return currentValue && rule.isFulfilled;
    }, true);
  },
  get isInvalid() {
    return !this.isValid;
  }
          </code></pre>
        </section>
        <section>
          <pre><code class="handlebars">
Card Type: {{form.type}}
            <input placeholder="Card number" type="text" name="number">
            <button disabled={{form.isNotValid}}>Submit</button>
          </code></pre>
        </section>
        <section>
          <div data-component="simple-validation">
        </section>
        <section>
          <h2>Requirement</h2>
          <p>
            I want validation to happen every time a field changes
          </p>
        </section>
        <section>
          <h2>Eliminate State</h2>
          <img src="images/walter-sobchak-gun.png">
          <p>
            Create a new form for your computation every time
          </p>
        </section>
        <section>
          <pre><code class="javascript">
$('form').on('input', function() {
  const form = new Form($(this).serialize());
  update(form);
})
          </code></pre>
        </section>
        <section>
          <div data-component="simple-validation">
        </section>

        <section>
          <h2>Requirement</h2>
          <p>
            Let's verify with the server that this card isn't in our fraud database.
          </p>
          <aside class="notes">
            this is where things really started getting nasty.
          </aside>
        </section>
        <section>
          <pre><code>
get isValid() {
  const rules = this.rules;
  return rules.reduce(function(currentValue, rule) {
    return currentValue && rule.isFulfilled;
  }, true);
},
          </code></pre>
        </section>
        <section>
          <h1>Solution</h2>
            <img src="images/promise-states.png" style="float: left;">
            <p style="position: relative; top: 100px;">
              Every validation rule is a promise
            </p>
        </section>
        <section>
          <h2>Promises</h2>
          <p>
            Compose Asynchronous And Synchronous Operations
          </p>
        </section>
        <section>
          <h2>Promises</h2>
          <p>
            Models dependencies of operations
          </p>
        </section>
        <section>
          <h2>Promises</h2>
          <p>
            flexible messaging
          </p>
        </section>
        <section>
          <h3>Developer</h3>

          <svg style="float: left" width="50%" height="550" viewBox="0 0 500 225" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet">
            <g transform="scale(.75,.75)">
              <title>Layer 1</title>
              <g class="active-path">
                <polyline class="graphEdge" id="svg_18" points="397.74151611328125,401.7062072753906 422.5,418.2488708496094 447.25848388671875,434.7915344238281" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_17" points="311.259521484375,273.74151611328125 331.488037109375,312.5 351.7165832519531,351.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_16" points="356.25994873046875,193.2415313720703 336.79949951171875,215.75 317.3390197753906,238.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_14" points="299.64306640625,110.64816284179688 325.7007751464844,125.7142562866211 351.75848388671875,140.7803497314453" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <circle fill="#cccccc" stroke-width="0" cx="385.00001" cy="160" r="33.24153" id="svg_1" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="301.99999" cy="256" r="17.74152" id="svg_3" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="367.49998" cy="381.5" r="30.24152" id="svg_5" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="478.99998" cy="456" r="31.74152" id="svg_6" class="graphNode" stroke="#000000"></circle>
              </g>
              <g>
                <polyline class="graphEdge graphEdge--fade" id="svg_22" points="122.91644287109375,282.74151611328125 89.65998840332031,326.5 56.403541564941406,370.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_21" points="149.36302185058594,282.74151611328125 145.17288208007812,323.5 140.98275756835938,364.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_20" points="177.00497436523438,282.74151611328125 207.52903747558594,335 238.0531005859375,387.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_19" points="217.244140625,132.64306640625 197.04708862304688,167.45077514648438 176.8500213623047,202.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_15" points="417.0819396972656,193.2415313720703 428.6715087890625,205.25 440.2610778808594,217.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
              </g>
              <g>
                <circle fill="#cccccc" stroke-width="0" cx="467.99998" cy="246" r="28.74152" id="svg_4" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#007fff" stroke-width="0" cx="247.5" cy="80.5" r="52.14306" id="svg_2" class="graphNode graphNode--blue" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="153.49999" cy="242.5" r="40.24152" id="svg_7" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="39.49999" cy="392.5" r="22.24152" stroke="#000000" id="svg_8" class="graphNode graphNode--fade"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="136.99999" cy="403" r="38.74152" id="svg_9" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="248.99999" cy="406" r="18.74152" id="svg_10" class="graphNode graphNode--fade" stroke="#000000"></circle>
              </g>
            </g>
          </svg>
          <span class="fragment" data-fragment-index="0" style="display: inline-block; float: right; transform: scale(2,4) rotate(180deg); position: absolute; top: 175px; ">↓</span>
          <svg class="fragment" data-fragment-index="0" style="float: right;" width="50%" height="550" viewBox="0 0 500 225" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet">
            <g transform="scale(.75,.75)">
              <title>Layer 1</title>
              <g class="active-path">
                <polyline class="graphEdge" id="svg_18" points="397.74151611328125,401.7062072753906 422.5,418.2488708496094 447.25848388671875,434.7915344238281" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_17" points="311.259521484375,273.74151611328125 331.488037109375,312.5 351.7165832519531,351.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_16" points="356.25994873046875,193.2415313720703 336.79949951171875,215.75 317.3390197753906,238.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge" id="svg_14" points="299.64306640625,110.64816284179688 325.7007751464844,125.7142562866211 351.75848388671875,140.7803497314453" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <circle fill="#cccccc" stroke-width="0" cx="385.00001" cy="160" r="33.24153" id="svg_1" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="301.99999" cy="256" r="17.74152" id="svg_3" class="graphNode" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="367.49998" cy="381.5" r="30.24152" id="svg_5" class="graphNode" stroke="#000000"></circle>
                <circle fill="#007fff" stroke-width="0" cx="478.99998" cy="456" r="31.74152" id="svg_6" class="graphNode" stroke="#000000"></circle>
              </g>
              <g>
                <polyline class="graphEdge graphEdge--fade" id="svg_22" points="122.91644287109375,282.74151611328125 89.65998840332031,326.5 56.403541564941406,370.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_21" points="149.36302185058594,282.74151611328125 145.17288208007812,323.5 140.98275756835938,364.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_20" points="177.00497436523438,282.74151611328125 207.52903747558594,335 238.0531005859375,387.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_19" points="217.244140625,132.64306640625 197.04708862304688,167.45077514648438 176.8500213623047,202.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                <polyline class="graphEdge graphEdge--fade" id="svg_15" points="417.0819396972656,193.2415313720703 428.6715087890625,205.25 440.2610778808594,217.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
              </g>
              <g>
                <circle fill="#007fff" stroke-width="0" cx="467.99998" cy="246" r="28.74152" id="svg_4" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="247.5" cy="80.5" r="52.14306" id="svg_2" class="graphNode graphNode--blue" stroke="#000000"></circle>
                <circle fill="#cccccc" stroke-width="0" cx="153.49999" cy="242.5" r="40.24152" id="svg_7" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#007fff" stroke-width="0" cx="39.49999" cy="392.5" r="22.24152" stroke="#000000" id="svg_8" class="graphNode graphNode--fade"></circle>
                <circle fill="#007fff" stroke-width="0" cx="136.99999" cy="403" r="38.74152" id="svg_9" class="graphNode graphNode--fade" stroke="#000000"></circle>
                <circle fill="#007fff" stroke-width="0" cx="248.99999" cy="406" r="18.74152" id="svg_10" class="graphNode graphNode--fade" stroke="#000000"></circle>
              </g>
            </g>
          </svg>
          <h3>User</h3>
          <aside class="notes">
            <ul>
              <li>just as pure, just as funcitonal as the way down</li>
              <li>The only difference is that we're starting with the dom and working our way up.</li>
              <li>this is just a taste</li>
            </ul>
          </aside>
        </section>
        <section>
          <img src="images/holy-roman-empire.jpg">
        </section>
        <section>
          <h3>User</h3>
          <div style="transform: rotate(180deg); position: relative; left: -200px; top: -50px;">
            <svg width="100%" height="550" viewBox="0 0 500 225" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet">
              <g transform="scale(.5,.5)">
                <title>Layer 1</title>
                <g class="active-path">
                  <polyline class="graphEdge" id="svg_18" points="397.74151611328125,401.7062072753906 422.5,418.2488708496094 447.25848388671875,434.7915344238281" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                  <polyline class="graphEdge" id="svg_17" points="311.259521484375,273.74151611328125 331.488037109375,312.5 351.7165832519531,351.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                  <polyline class="graphEdge" id="svg_16" points="356.25994873046875,193.2415313720703 336.79949951171875,215.75 317.3390197753906,238.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                  <polyline class="graphEdge" id="svg_14" points="299.64306640625,110.64816284179688 325.7007751464844,125.7142562866211 351.75848388671875,140.7803497314453" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                  <circle fill="#cccccc" stroke-width="0" cx="385.00001" cy="160" r="33.24153" id="svg_1" class="graphNode" stroke="#000000"></circle>
                  <circle fill="#cccccc" stroke-width="0" cx="301.99999" cy="256" r="17.74152" id="svg_3" class="graphNode" stroke="#000000"></circle>
                  <circle fill="#cccccc" stroke-width="0" cx="367.49998" cy="381.5" r="30.24152" id="svg_5" class="graphNode" stroke="#000000"></circle>
                  <circle fill="#007fff" stroke-width="0" cx="478.99998" cy="456" r="31.74152" id="svg_6" class="graphNode" stroke="#000000"></circle>
                </g>
                <g>
                  <polyline class="graphEdge graphEdge--fade" id="svg_22" points="122.91644287109375,282.74151611328125 89.65998840332031,326.5 56.403541564941406,370.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                  <polyline class="graphEdge graphEdge--fade" id="svg_21" points="149.36302185058594,282.74151611328125 145.17288208007812,323.5 140.98275756835938,364.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                  <polyline class="graphEdge graphEdge--fade" id="svg_20" points="177.00497436523438,282.74151611328125 207.52903747558594,335 238.0531005859375,387.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                  <polyline class="graphEdge graphEdge--fade" id="svg_19" points="217.244140625,132.64306640625 197.04708862304688,167.45077514648438 176.8500213623047,202.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                  <polyline class="graphEdge graphEdge--fade" id="svg_15" points="417.0819396972656,193.2415313720703 428.6715087890625,205.25 440.2610778808594,217.25848388671875" stroke="#000000" stroke-width="5" fill="none" stroke-dasharray="5,5"></polyline>
                </g>
                <g>
                  <circle fill="#007fff" stroke-width="0" cx="467.99998" cy="246" r="28.74152" id="svg_4" class="graphNode graphNode--fade" stroke="#000000"></circle>
                  <circle fill="#cccccc" stroke-width="0" cx="247.5" cy="80.5" r="52.14306" id="svg_2" class="graphNode graphNode--blue" stroke="#000000"></circle>
                  <circle fill="#cccccc" stroke-width="0" cx="153.49999" cy="242.5" r="40.24152" id="svg_7" class="graphNode graphNode--fade" stroke="#000000"></circle>
                  <circle fill="#007fff" stroke-width="0" cx="39.49999" cy="392.5" r="22.24152" stroke="#000000" id="svg_8" class="graphNode graphNode--fade"></circle>
                  <circle fill="#007fff" stroke-width="0" cx="136.99999" cy="403" r="38.74152" id="svg_9" class="graphNode graphNode--fade" stroke="#000000"></circle>
                  <circle fill="#007fff" stroke-width="0" cx="248.99999" cy="406" r="18.74152" id="svg_10" class="graphNode graphNode--fade" stroke="#000000"></circle>
                </g>
              </g>
            </svg>
          </div>
          <h3>Developer</h3>
          <aside class="notes">
            User is just another stream in our
            If we can spend a little less time thing about how we can program
            values so we can present them to our users, and instead think about
            how we can set our users free to present values to us.
          </aside>
        </section>
        <section data-background="#588cb1">
          <!-- <h1>on('input')</h1> -->
          <!-- <p> -->
          <!--   <div> -->
          <!--     <a href="http://frontside.io">http://frontside.io</a> -->
          <!--   </div> -->
          <!--   <a href="http://twitter.com/cowboyd">@cowboyd</a> -->
          <!-- </p> -->
        </section>
          </div>

          </div>

          <script src="lib/js/head.min.js"></script>
          <script src="js/reveal.js"></script>

          <script src="example/dist/assets/vendor.js"></script>
          <script src="example/dist/assets/example.js"></script>

          <script>

           // Full list of configuration options available at:
           // https://github.com/hakimel/reveal.js#configuration
           Reveal.initialize({
             controls: false,
             progress: false,
             history: true,
             center: true,

             //transition: 'slide', // none/fade/slide/convex/concave/zoom
             transition: 'none',

             // Optional reveal.js plugins
             dependencies: [
               { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
               { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
               { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
               { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
               { src: 'plugin/zoom-js/zoom.js', async: true },
               { src: 'plugin/notes/notes.js', async: true }
             ]
           });

          </script>

  </body>
</html>
